<html>
<head>
<title>nProxy Demo</title>
</head>
<body>
    <h1>nPorxy Demo</h1>
    <label for="address" ><input id="address" style="width:200px"></label>
    <button onClick="onStart()" style="width:50px;" >Go!</button>
<script>
    (function(){
        String.prototype.trim=function(){
            return this.replace(/(^\s*)|(\s*$)/,'');
        }
    })();
    
    function onStart()
    {
        var input = document.getElementById("address").value.trim();
        var addRegExp = /^(?:(https?:)?\/\/)?([^\/]+.*$)/i;
        var ret = null;
        if(input != '' && (ret = input.match(addRegExp)))
        {
            ret[1] = (ret[1]?ret[1].replace(':','/'):'http/');
            var proxyUrl = '/nproxy/' + ret[1] + ret[2];
            window.location = proxyUrl;
        }
        else
        {
            alert('address is invalid!');
        }
    }
</script>
</body>
</html>
